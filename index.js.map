{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '49650448-036e738118328f32db28a86cb';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query, page) {\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page.toString(),\n    per_page: '15',\n  });\n\n  try {\n    const response = await fetch(`${BASE_URL}?${searchParams}`);\n\n    if (!response.ok) {\n      throw new Error(`HTTP error! Status: ${response.status}`);\n    }\n\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('API Error:', error);\n    throw new Error('Failed to fetch images');\n  }\n}\n","let lightbox;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  if (window.SimpleLightbox) {\n    lightbox = new window.SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } else {\n    console.error('SimpleLightbox is not available');\n  }\n});\n\nconst galleryContainer = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"photo-card\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n          <p class=\"info-item\">\n            <b>Likes</b>\n            ${likes}\n          </p>\n          <p class=\"info-item\">\n            <b>Views</b>\n            ${views}\n          </p>\n          <p class=\"info-item\">\n            <b>Comments</b>\n            ${comments}\n          </p>\n          <p class=\"info-item\">\n            <b>Downloads</b>\n            ${downloads}\n          </p>\n        </div>\n      </li>\n    `\n    )\n    .join('');\n\n  galleryContainer.insertAdjacentHTML('beforeend', markup);\n\n  if (lightbox) {\n    lightbox.refresh();\n  } else if (window.SimpleLightbox) {\n    lightbox = new window.SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  }\n}\n\nexport function clearGallery() {\n  galleryContainer.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.classList.add('show');\n}\n\nexport function hideLoader() {\n  loader.classList.remove('show');\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.add('show');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.remove('show');\n}\n","import { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions.js';\n\nconst searchForm = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet currentQuery = '';\nlet currentPage = 1;\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  const searchInput = event.target.elements.searchQuery;\n  const query = searchInput.value.trim();\n\n  if (!query) {\n    window.iziToast.error({\n      title: 'Помилка',\n      message: 'Будь ласка, введіть пошуковий запит',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  if (query !== currentQuery) {\n    currentPage = 1;\n    clearGallery();\n    hideLoadMoreButton();\n  }\n\n  currentQuery = query;\n\n  try {\n    showLoader();\n    hideLoadMoreButton();\n\n    const data = await getImagesByQuery(query, currentPage);\n\n    if (data.hits.length === 0) {\n      window.iziToast.info({\n        title: 'Інформація',\n        message:\n          'На жаль, за вашим запитом нічого не знайдено. Спробуйте інший запит.',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    if (currentPage === 1) {\n      window.iziToast.success({\n        title: 'Успіх',\n        message: `Знайдено ${data.totalHits} зображень`,\n        position: 'topRight',\n      });\n    }\n\n    createGallery(data.hits);\n\n    const totalPages = Math.ceil(data.totalHits / 15);\n    if (currentPage < totalPages) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n      if (data.hits.length > 0) {\n        window.iziToast.info({\n          title: 'Інформація',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n        });\n      }\n    }\n\n    if (currentPage > 1) {\n      smoothScroll();\n    }\n  } catch (error) {\n    window.iziToast.error({\n      title: 'Помилка',\n      message: 'Щось пішло не так. Спробуйте ще раз пізніше.',\n      position: 'topRight',\n    });\n    console.error(error);\n  } finally {\n    hideLoader();\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n\n  try {\n    showLoader();\n    hideLoadMoreButton();\n\n    const data = await getImagesByQuery(currentQuery, currentPage);\n\n    createGallery(data.hits);\n\n    const totalPages = Math.ceil(data.totalHits / 15);\n    if (currentPage < totalPages) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n      window.iziToast.info({\n        title: 'Інформація',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n\n    smoothScroll();\n  } catch (error) {\n    window.iziToast.error({\n      title: 'Помилка',\n      message: 'Щось пішло не так. Спробуйте ще раз пізніше.',\n      position: 'topRight',\n    });\n    console.error(error);\n  } finally {\n    hideLoader();\n  }\n});\n\nfunction smoothScroll() {\n  const gallery = document.querySelector('.gallery');\n  if (!gallery || !gallery.firstElementChild) {\n    console.log('No cards to scroll to');\n    return;\n  }\n\n  const { height: cardHeight } =\n    gallery.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","searchParams","response","error","lightbox","galleryContainer","loader","loadMoreBtn","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","searchForm","currentQuery","currentPage","event","data","totalPages","smoothScroll","gallery","cardHeight"],"mappings":"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"}